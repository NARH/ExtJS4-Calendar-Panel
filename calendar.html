<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title id="page-title">ExtJS 4 Calendar Panel Sample</title>

    <link rel="stylesheet" type="text/css" href="resources/css/ext-all.css">
	<style type="text/css">
	#footer {
		clear: both;
		border-top: 1px
		solid #bbb;
		font-size: 0.9em;
		color: #aaa;
		padding: 5px;
		text-align:center;
		background:#fff;
	}
	</style>

    <script type="text/javascript" src="bootstrap.js"></script>
    <script type="text/javascript" src="locale/ext-lang-ja.js"></script>
    <script type="text/javascript" src="locale/nrt-lang-ja.js"></script>
    <link rel="stylesheet" type="text/css" href="resources/css/ux/Nrt/calendar.css">
    <script type="text/javascript" src="calendar.js"></script>
	<!--
	<script type="text/javascript" src="js/ux/calendar/AbstractPanel.js"></script>
	<script type="text/javascript" src="js/ux/calendar/Panel.js"></script>
	-->
	<script>

		Ext.onReady( function() {
			Ext.QuickTips.init();
			Ext.tip.QuickTipManager.init();
			Ext.tip.QuickTipManager.enable();

			var dt		= new Date( Ext.Date.now() );
			var el		= Ext.get('console')
				, footer	= Ext.get('footer');
			 
			Nrt.log( '-- initializing start! --' );

			Nrt.log( '-- initializing calendar model start! --' );
			Ext.define( 'Nrt.calendar.model.CalendarModel', {
				  extend:			'Ext.data.Model'
				, fields:			[ 'id', 'title' ]
				, idProperty:		'id'
				, proxy:			{
					  type:			'rest'
					, url:			'resources/json/calendar.json'
					, reader:		{
						  type:		'json'
						, root:		'calendars'
					}
				}
			});
			Nrt.log( '-- initializing calendar model done! --' );

			Nrt.log( '-- initializing calendar store start! --' );
			Ext.create( 'Ext.data.Store', {
				  model:			'Nrt.calendar.model.CalendarModel'
				, storeId:			'calendars'
				, autoLoad:			true
			});
			Nrt.log( '-- initializing calendar store done! --' );

			Nrt.log( '-- initializing event model start! --' );
			Ext.define( 'Nrt.calendar.model.EventModel', {
				  extend:			'Ext.data.Model'
				, fields:			[ 'id', 'cid', 'title', 'start', 'end', 'allday', 'notes', 'reminder', 'location', 'url' ]
				, idProperty:		'id'
				, proxy:			{
					  type:			'rest'
					, url:			'resources/json/events.json'
					, reader:		{
						  type:		'json'
						, root:		'events'
					}
				}
			});
			Nrt.log( '-- initializing event model done! --' );

			Nrt.log( '-- initializing event store start! --' );
			Ext.create( 'Ext.data.Store', {
				  model:			'Nrt.calendar.model.EventModel'
				, storeId:			'events'
				, autoLoad:			true
			});
			Nrt.log( '-- initializing event store done! --' );

			Nrt.log( '-- create vieport start! --' );
			Ext.create('Ext.container.Viewport', {
				  layout:			'border'
				, renderTo:			Ext.getBody()
				, items:			[
					{
						  xtype:		'nrt.calendar'
						, title:		'カレンダー'
						, region:		'center'
						, dockedItems:	[
				  			  { xtype:	'nrt.calendar.controllbar', dock:	'top' }
						]
						, tools:		[
							  {
								  type:		'gear'
								, qtip:	{
									  text: '設定'
								}
								, autoShow:	true
								, handler:	function( event, toolEl, panel ) {
									var win = Ext.create('Ext.window.Window', {
										  title: '設定ウィンドウ'
										, width:	400
										, height:	200
										, html:		'<div>設定</div>'
									});
									win.show();
								}
							}
						]
					}
					, {
						  contentEl:	'footer'
						, region:		'south'
						, border:		0
					}
				]
			});
			Nrt.log( '-- create vieport done! --' );
			 
			Nrt.log( '-- initializing done! --' );
		});
	</script>
</head>
<body>
	<div id="console"></div>
	<div id="footer">&copy; NRT Engineer</div>
</body>
</html>


